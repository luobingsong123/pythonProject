# WebUI å¿«é€Ÿå…¥é—¨æŒ‡å—

## å‰ç½®æ¡ä»¶

1. âœ… å·²å®Œæˆå›žæµ‹å¹¶ä¿å­˜è§¦å‘ç‚¹ä½åˆ°æ•°æ®åº“
2. âœ… æ•°æ®åº“ä¸­æœ‰è‚¡ç¥¨æ—¥çº¿æ•°æ® (`stock_daily_data` è¡¨)
3. âœ… å·²é…ç½®å¥½ `config/config.ini`

## å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–

```bash
cd webui
pip install -r requirements.txt
```

### 2. å¯åŠ¨æœåŠ¡

```bash
# æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæŽ¨èï¼‰
python start_webui.py

# æ–¹æ³•2: ç›´æŽ¥è¿è¡ŒFlaskåº”ç”¨
python app.py
```

### 3. è®¿é—®ç•Œé¢

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://localhost:5000
```

å¦‚æžœé…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†å…¶ä»–ç«¯å£ï¼Œè¯·ä½¿ç”¨ç›¸åº”åœ°å€ã€‚

## ä½¿ç”¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©ç­–ç•¥

1. é¡µé¢é¡¶éƒ¨æœ‰ä¸¤ä¸ªä¸‹æ‹‰èœå•
2. ç‚¹å‡»"é€‰æ‹©ç­–ç•¥"ä¸‹æ‹‰èœå•
3. é€‰æ‹©è¦æŸ¥çœ‹çš„ç­–ç•¥ï¼ˆå¦‚ï¼šCodeBuddyStrategyï¼‰

### ç¬¬äºŒæ­¥ï¼šé€‰æ‹©è‚¡ç¥¨

1. é€‰æ‹©ç­–ç•¥åŽï¼Œ"é€‰æ‹©è‚¡ç¥¨"ä¸‹æ‹‰èœå•ä¼šè‡ªåŠ¨åŠ è½½è¯¥ç­–ç•¥ä¸‹çš„è‚¡ç¥¨
2. ç‚¹å‡»é€‰æ‹©è¦æŸ¥çœ‹çš„è‚¡ç¥¨
3. èœå•ä¸­ä¼šæ˜¾ç¤ºè‚¡ç¥¨ä»£ç ã€å¸‚åœºç±»åž‹å’Œè§¦å‘æ¬¡æ•°

### ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹è§¦å‘ç‚¹ä½

1. é€‰æ‹©è‚¡ç¥¨åŽï¼Œé¡µé¢ä¼šæ˜¾ç¤ºè¯¥è‚¡ç¥¨çš„æ‰€æœ‰è§¦å‘ç‚¹ä½
2. æ¯ä¸ªè§¦å‘ç‚¹ä½æ˜¯ä¸€ä¸ªæŒ‰é’®ï¼š
   - ðŸ”´ çº¢è‰²æŒ‰é’®ï¼šä¹°å…¥ç‚¹ä½
   - ðŸŸ¢ ç»¿è‰²æŒ‰é’®ï¼šå–å‡ºç‚¹ä½
3. æŒ‰é’®ä¸Šæ˜¾ç¤ºäº¤æ˜“ç±»åž‹å’Œæ—¥æœŸ

### ç¬¬å››æ­¥ï¼šæŸ¥çœ‹Kçº¿å›¾

1. ç‚¹å‡»ä»»æ„è§¦å‘ç‚¹ä½æŒ‰é’®
2. Kçº¿å›¾ä¼šè‡ªåŠ¨åŠ è½½ï¼Œæ˜¾ç¤ºè¯¥è§¦å‘ç‚¹ä½å‰åŽçš„èµ°åŠ¿
3. é»˜è®¤æ˜¾ç¤ºå‰åŽ50ä¸ªäº¤æ˜“æ—¥

### ç¬¬äº”æ­¥ï¼šè°ƒæ•´æ˜¾ç¤ºèŒƒå›´

1. åœ¨Kçº¿å›¾æ ‡é¢˜å³ä¾§æœ‰"æ˜¾ç¤ºèŒƒå›´"ä¸‹æ‹‰èœå•
2. å¯é€‰æ‹©ï¼š
   - å‰åŽ30å¤©
   - å‰åŽ50å¤©ï¼ˆé»˜è®¤ï¼‰
   - å‰åŽ100å¤©
3. é€‰æ‹©åŽä¼šé‡æ–°åŠ è½½Kçº¿å›¾

## Kçº¿å›¾è¯´æ˜Ž

### å›¾è¡¨å…ƒç´ 

| å…ƒç´  | é¢œè‰² | è¯´æ˜Ž |
|------|------|------|
| Kçº¿ï¼ˆæ¶¨ï¼‰ | çº¢è‰² | æ”¶ç›˜ä»· >= å¼€ç›˜ä»· |
| Kçº¿ï¼ˆè·Œï¼‰ | ç»¿è‰² | æ”¶ç›˜ä»· < å¼€ç›˜ä»· |
| MA5 | é»„è‰² | 5æ—¥ç§»åŠ¨å¹³å‡çº¿ |
| MA10 | ç´«è‰² | 10æ—¥ç§»åŠ¨å¹³å‡çº¿ |
| MA20 | è“è‰² | 20æ—¥ç§»åŠ¨å¹³å‡çº¿ |
| MA30 | æ©™è‰² | 30æ—¥ç§»åŠ¨å¹³å‡çº¿ |
| è§¦å‘ç‚¹ä½æ ‡è®° | çº¢è‰²/ç»¿è‰² | å›¾é’‰å›¾æ ‡æ ‡è®°è§¦å‘ç‚¹ |
| è§¦å‘ä»·ä½çº¿ | çº¢è‰²/ç»¿è‰² | è™šçº¿æ ‡è®°è§¦å‘ä»·æ ¼ |

### äº¤äº’æ“ä½œ

- **é¼ æ ‡æ‚¬åœ**ï¼šæ˜¾ç¤ºå½“æ—¥è¯¦ç»†ä¿¡æ¯
- **æ»šè½®ç¼©æ”¾**ï¼šæ”¾å¤§/ç¼©å°æŸ¥çœ‹
- **æ‹–æ‹½ç§»åŠ¨**ï¼šå·¦å³æ‹–æ‹½æŸ¥çœ‹ä¸åŒæ—¶é—´æ®µ
- **åº•éƒ¨æ»‘å—**ï¼šè°ƒæ•´æ˜¾ç¤ºèŒƒå›´
- **å›¾ä¾‹ç‚¹å‡»**ï¼šæ˜¾ç¤º/éšè—å¯¹åº”çš„çº¿æ¡

## è§¦å‘ç‚¹ä½è¯¦æƒ…

é€‰æ‹©è§¦å‘ç‚¹ä½åŽï¼ŒKçº¿å›¾ä¸Šæ–¹ä¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼š

- äº¤æ˜“ç±»åž‹ï¼ˆä¹°å…¥/å–å‡ºï¼‰
- è§¦å‘æ—¥æœŸ
- ä»·æ ¼
- æ•°é‡
- åˆ©æ¶¦ï¼ˆå–å‡ºæ—¶ï¼‰
- æ”¶ç›ŠçŽ‡ï¼ˆå–å‡ºæ—¶ï¼‰
- æŒæœ‰å¤©æ•°ï¼ˆå–å‡ºæ—¶ï¼‰

## æµ‹è¯•API

å¦‚æžœéœ€è¦æµ‹è¯•APIæŽ¥å£ï¼Œå¯ä»¥è¿è¡Œï¼š

```bash
python test_api.py
```

è¿™ä¼šä¾æ¬¡æµ‹è¯•æ‰€æœ‰APIæŽ¥å£ï¼Œå¹¶æ˜¾ç¤ºå“åº”ç»“æžœã€‚

## å¸¸è§é—®é¢˜

### Q1: å¯åŠ¨åŽæ— æ³•è®¿é—®é¡µé¢

**å¯èƒ½åŽŸå› ï¼š**
1. ç«¯å£è¢«å ç”¨
2. é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ³•ï¼š**
```bash
# ä¿®æ”¹é…ç½®æ–‡ä»¶ config/config.ini
[webserver]
host = 0.0.0.0
port = 5001  # æ”¹ç”¨å…¶ä»–ç«¯å£
```

### Q2: ç­–ç•¥åˆ—è¡¨ä¸ºç©º

**åŽŸå› ï¼š** æ•°æ®åº“ä¸­æ²¡æœ‰è§¦å‘ç‚¹ä½æ•°æ®

**è§£å†³æ–¹æ³•ï¼š**
1. å…ˆè¿è¡Œå›žæµ‹ï¼Œå¹¶è®¾ç½® `save_to_db=True`
2. ç¡®ä¿å›žæµ‹æˆåŠŸå®Œæˆ

```python
from backtrade_local_data_myst import run_backtest
from utils.strategies.codebuddy_st import CodeBuddyStrategy

run_backtest(
    stock_code="601288",
    market="sh",
    name="å†œä¸šé“¶è¡Œ",
    start_date="2024-01-01",
    end_date="2024-12-31",
    strategy_class=CodeBuddyStrategy,
    save_to_db=True  # å…³é”®ï¼šä¿å­˜åˆ°æ•°æ®åº“
)
```

### Q3: Kçº¿å›¾æ˜¾ç¤ºä¸ºç©ºç™½

**å¯èƒ½åŽŸå› ï¼š**
1. æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥è‚¡ç¥¨çš„æ—¥çº¿æ•°æ®
2. æ—¥æœŸèŒƒå›´æ•°æ®ä¸è¶³

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ `stock_daily_data` è¡¨æ˜¯å¦æœ‰æ•°æ®
2. ç¡®ä¿è§¦å‘æ—¥æœŸå‰åŽæœ‰è¶³å¤Ÿçš„äº¤æ˜“æ—¥æ•°æ®

### Q4: è§¦å‘ç‚¹ä½ä½ç½®ä¸æ­£ç¡®

**åŽŸå› ï¼š** è§¦å‘æ—¥æœŸä¸æ˜¯äº¤æ˜“æ—¥

**ç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†**ï¼šä¼šæŸ¥æ‰¾æœ€è¿‘çš„äº¤æ˜“æ—¥è¿›è¡Œæ˜¾ç¤º

### Q5: é¡µé¢åŠ è½½ç¼“æ…¢

**å¯èƒ½åŽŸå› ï¼š**
1. å¤§é‡æ•°æ®æŸ¥è¯¢
2. ç½‘ç»œå»¶è¿Ÿ

**ä¼˜åŒ–å»ºè®®ï¼š**
1. å‡å°‘æ˜¾ç¤ºçš„äº¤æ˜“æ—¥æ•°
2. ä½¿ç”¨æœ¬åœ°MySQLæœåŠ¡

## ç¤ºä¾‹åœºæ™¯

### åœºæ™¯1ï¼šæŸ¥çœ‹ç‰¹å®šè‚¡ç¥¨çš„ä¹°å…¥ç‚¹ä½

1. é€‰æ‹©ç­–ç•¥ï¼š`CodeBuddyStrategy`
2. é€‰æ‹©è‚¡ç¥¨ï¼š`601288 (SH)`
3. ç‚¹å‡»çº¢è‰²çš„ä¹°å…¥ç‚¹ä½æŒ‰é’®
4. æŸ¥çœ‹ä¹°å…¥å‰åŽçš„Kçº¿èµ°åŠ¿

### åœºæ™¯2ï¼šå¯¹æ¯”å¤šä¸ªå–å‡ºç‚¹ä½çš„æ”¶ç›Š

1. é€‰æ‹©ç­–ç•¥å’Œè‚¡ç¥¨
2. ä¾æ¬¡ç‚¹å‡»æ¯ä¸ªå–å‡ºç‚¹ä½ï¼ˆç»¿è‰²æŒ‰é’®ï¼‰
3. æŸ¥çœ‹æ¯æ¬¡å–å‡ºçš„æ”¶ç›ŠçŽ‡
4. å¯¹æ¯”ä¸åŒå–å‡ºç‚¹ä½çš„è¡¨çŽ°

### åœºæ™¯3ï¼šåˆ†æžç­–ç•¥è§¦å‘æ¡ä»¶

1. é€‰æ‹©ç­–ç•¥å’Œè‚¡ç¥¨
2. æŸ¥çœ‹æ‰€æœ‰ä¹°å…¥ç‚¹ä½
3. è§‚å¯Ÿä¹°å…¥å‰çš„æˆäº¤é‡å˜åŒ–
4. éªŒè¯ç­–ç•¥çš„è§¦å‘æ¡ä»¶ï¼ˆå¦‚æˆäº¤é‡æœ€ä½Žï¼‰

## è¿›é˜¶ä½¿ç”¨

### è‡ªå®šä¹‰Kçº¿å›¾é¢œè‰²

ç¼–è¾‘ `templates/index.html`ï¼Œæœç´¢é¢œè‰²ä»£ç ï¼š

```javascript
// æ¶¨
color: '#ef4444',
// è·Œ
color0: '#22c55e',
```

### æ·»åŠ æ›´å¤šæŠ€æœ¯æŒ‡æ ‡

åœ¨ `drawKlineChart` å‡½æ•°ä¸­æ·»åŠ æ–°çš„ç³»åˆ—ï¼Œä¾‹å¦‚RSIã€KDJç­‰ã€‚

### å¯¼å‡ºKçº¿æ•°æ®

åœ¨æµè§ˆå™¨æŽ§åˆ¶å°ï¼ˆF12ï¼‰æ‰§è¡Œï¼š

```javascript
const chart = echarts.getInstanceByDom(document.getElementById('kline-chart'));
const option = chart.getOption();
console.log(option);
```

## æ€§èƒ½å»ºè®®

1. **é¦–æ¬¡åŠ è½½**ï¼šé¦–æ¬¡åŠ è½½Kçº¿å›¾å¯èƒ½è¾ƒæ…¢ï¼ŒåŽç»­ä¼šç¼“å­˜
2. **æ˜¾ç¤ºèŒƒå›´**ï¼šæ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œå»ºè®®ä½¿ç”¨30å¤©æ˜¾ç¤º
3. **æµè§ˆå™¨**ï¼šæŽ¨èä½¿ç”¨Chromeæˆ–Edgeæµè§ˆå™¨

## å®‰å…¨æç¤º

1. ä¸è¦åœ¨ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨ `debug=True`
2. ä¿®æ”¹é»˜è®¤ç«¯å£
3. é…ç½®é˜²ç«å¢™è§„åˆ™
4. å®šæœŸå¤‡ä»½æ•°æ®åº“

## åœæ­¢æœåŠ¡

åœ¨ç»ˆç«¯æŒ‰ `Ctrl+C` åœæ­¢æœåŠ¡ã€‚

## ä¸‹ä¸€æ­¥

- ðŸ“– æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š`README.md`
- ðŸ”§ è‡ªå®šä¹‰ç•Œé¢ï¼šä¿®æ”¹ `templates/index.html`
- ðŸš€ éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼šé…ç½®ç”Ÿäº§çŽ¯å¢ƒ

## èŽ·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. å®Œæ•´æ–‡æ¡£ï¼š`README.md`
2. APIæ–‡æ¡£ï¼š`README.md` ä¸­çš„APIæŽ¥å£è¯´æ˜Ž
3. æµ‹è¯•è„šæœ¬ï¼š`test_api.py`
